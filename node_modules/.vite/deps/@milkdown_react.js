import {
  require_react
} from "./chunk-FEW2R62K.js";
import {
  __toESM
} from "./chunk-WXXH56N5.js";

// node_modules/.pnpm/@milkdown+react@7.3.6_@milkdown+core@7.3.6_@milkdown+ctx@7.3.6_@milkdown+prose@7.3.6_@milkdow_6xlyrkwecsjk2cwvqdotaf3vbq/node_modules/@milkdown/react/lib/index.es.js
var import_react = __toESM(require_react());
var s = (0, import_react.createContext)({});
function I() {
  const { dom: t, editor: o, setLoading: e, editorFactory: r } = (0, import_react.useContext)(s), i = (0, import_react.useRef)(null);
  return (0, import_react.useEffect)(() => {
    const n = i.current;
    if (!r || !n)
      return;
    t.current = n;
    const d = r(n);
    if (d)
      return e(true), d.create().then((c) => {
        o.current = c;
      }).finally(() => {
        e(false);
      }).catch(console.error), () => {
        var c;
        (c = o.current) == null || c.destroy();
      };
  }, [t, o, r, e]), i;
}
var C = () => {
  const t = I();
  return import_react.default.createElement("div", { "data-milkdown-root": true, ref: t });
};
var R = ({ children: t }) => {
  const o = (0, import_react.useRef)(void 0), [e, r] = (0, import_react.useState)(void 0), i = (0, import_react.useRef)(), [n, d] = (0, import_react.useState)(true), c = (0, import_react.useMemo)(() => ({
    loading: n,
    dom: o,
    editor: i,
    setLoading: d,
    editorFactory: e,
    setEditorFactory: r
  }), [n, e]);
  return import_react.default.createElement(s.Provider, { value: c }, t);
};
function k(t, o = []) {
  const e = (0, import_react.useContext)(s), r = (0, import_react.useCallback)(t, o);
  return (0, import_react.useLayoutEffect)(() => {
    e.setEditorFactory(() => r);
  }, [e, r]), {
    loading: e.loading,
    get: () => e.editor.current
  };
}
function F() {
  const t = (0, import_react.useContext)(s), o = (0, import_react.useCallback)(() => t.editor.current, [t.editor]);
  return [t.loading, o];
}
export {
  C as Milkdown,
  R as MilkdownProvider,
  k as useEditor,
  F as useInstance
};
//# sourceMappingURL=@milkdown_react.js.map
